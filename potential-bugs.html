<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" rules, potential-bugs">
<title>Potential-bugs Rule Set | A static code analyzer for Kotlin</title>
<link rel="stylesheet" href="/detekt/css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="/detekt/css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="/detekt/css/customstyles.css">
<link rel="stylesheet" href="/detekt/css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="/detekt/css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="/detekt/js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="/detekt/js/toc.js"></script>
<script src="/detekt/js/customscripts.js"></script>

<link rel="shortcut icon" href="/detekt/images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="detekt" href="https://detekt.github.io/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> detekt</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="news">News</a></li>
                
                
                
                <li><a href="https://github.com/detekt/detekt" target="_blank">GitHub</a></li>
                
                
                
                <li><a href="https://kotlinlang.slack.com/messages/C88E12QH4/convo/C88E12QH4-1518006028.000268/" target="_blank">Slack</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="/detekt/js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: '/detekt/search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Potential-bugs Rule Set">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  
  
  <li>
      <a href="#">User Documentation</a>
      <ul>
          
          
          
          <li><a href="/detekt/index.html">Introduction</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/changelog.html">Release Notes</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/changelog-rc.html">Pre 1.0 Release Notes</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/configurations.html">Configuration File</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/reporting.html">Reporting</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/suppressing-rules.html">Suppressing Issues in Code</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/baseline.html">Suppressing Issues via Baseline File</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/extensions.html">Extending detekt</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/snapshots.html">Using snapshots</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Getting Started</a>
      <ul>
          
          
          
          <li><a href="/detekt/cli.html">with the Command Line Interface</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/gradle.html">with Gradle</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/gradletask.html">with Gradle Plain Task</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/mavenanttask.html">with Maven Ant Task</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/type-resolution.html">Using Type Resolution</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/git-pre-commit-hook.html">with a Git pre-commit hook</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Rule Sets</a>
      <ul>
          
          
          
          <li><a href="/detekt/comments.html">comments</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/complexity.html">complexity</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/coroutines.html">coroutines</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/empty-blocks.html">empty-blocks</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/exceptions.html">exceptions</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/formatting.html">formatting</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/naming.html">naming</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/performance.html">performance</a></li>
          
          
          
          
          
          
          <li class="active"><a href="/detekt/potential-bugs.html">potential-bugs</a></li>
          
          
          
          
          
          
          <li><a href="/detekt/style.html">style</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">KDoc</a>
      <ul>
          
          
          
          <li><a href="/detekt/pages/kdoc/detekt-api/index.html">detekt-api</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Potential-bugs Rule Set</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    

    <a target="_blank" href="https://github.com/detekt/detekt/tree/main/docs/pages/documentation/potential-bugs.md" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>

    


    

  <p>The potential-bugs rule set provides rules that detect potential bugs.</p>

<h3 id="casttonullabletype">CastToNullableType</h3>

<p>Disallow to cast to nullable types. There are cases where <code class="language-plaintext highlighter-rouge">as String?</code> is misused as the safe cast (<code class="language-plaintext highlighter-rouge">as? String</code>),
so if you want to prevent those cases, turn on this rule.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">x</span><span class="p">:</span> <span class="nc">String</span><span class="p">?</span> <span class="p">=</span> <span class="n">a</span> <span class="k">as</span> <span class="nc">String</span><span class="p">?</span> <span class="c1">// If 'a' is not String, ClassCastException will be thrown.</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">x</span><span class="p">:</span> <span class="nc">String</span><span class="p">?</span> <span class="p">=</span> <span class="n">a</span> <span class="k">as</span><span class="p">?</span> <span class="nc">String</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="deprecation">Deprecation</h3>

<p>Deprecated elements are expected to be removed in future. Alternatives should be found if possible.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 20min</p>

<p><strong>Aliases</strong>: DEPRECATION</p>

<h3 id="dontdowncastcollectiontypes">DontDowncastCollectionTypes</h3>

<p>Down-casting immutable types from kotlin.collections should be discouraged.
The result of the downcast is platform specific and can lead to unexpected crashes.
Prefer to use instead the <code class="language-plaintext highlighter-rouge">toMutable&lt;Type&gt;()</code> functions.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-1">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">list</span> <span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nf">getAList</span><span class="p">()</span>
<span class="k">if</span> <span class="p">(</span><span class="n">list</span> <span class="k">is</span> <span class="nc">MutableList</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">list</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="p">}</span>

<span class="p">(</span><span class="n">list</span> <span class="k">as</span> <span class="nc">MutableList</span><span class="p">).</span><span class="nf">add</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="compliant-code-1">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">list</span> <span class="p">:</span> <span class="nc">List</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">&gt;</span> <span class="p">=</span> <span class="nf">getAList</span><span class="p">()</span>
<span class="n">list</span><span class="p">.</span><span class="nf">toMutableList</span><span class="p">().</span><span class="nf">add</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="duplicatecaseinwhenexpression">DuplicateCaseInWhenExpression</h3>

<p>Flags duplicate case statements in when expressions.</p>

<p>If a when expression contains the same case statement multiple times they should be merged. Otherwise it might be
easy to miss one of the cases when reading the code, leading to unwanted side effects.</p>

<p><strong>Active by default</strong>: Yes - Since v1.0.0</p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-2">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">when</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="mi">1</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"one"</span><span class="p">)</span>
    <span class="mi">1</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"one"</span><span class="p">)</span>
    <span class="k">else</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"else"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-2">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">when</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="mi">1</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"one"</span><span class="p">)</span>
    <span class="k">else</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"else"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="equalsalwaysreturnstrueorfalse">EqualsAlwaysReturnsTrueOrFalse</h3>

<p>Reports equals() methods which will always return true or false.</p>

<p>Equals methods should always report if some other object is equal to the current object.
See the Kotlin documentation for Any.equals(other: Any?):
https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/equals.html</p>

<p><strong>Active by default</strong>: Yes - Since v1.2.0</p>

<p><strong>Debt</strong>: 20min</p>

<h4 id="noncompliant-code-3">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">override</span> <span class="k">fun</span> <span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">Boolean</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">true</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-3">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">override</span> <span class="k">fun</span> <span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">Boolean</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span> <span class="p">===</span> <span class="n">other</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="equalswithhashcodeexist">EqualsWithHashCodeExist</h3>

<p>When a class overrides the equals() method it should also override the hashCode() method.</p>

<p>All hash-based collections depend on objects meeting the equals-contract. Two equal objects must produce the
same hashcode. When inheriting equals or hashcode, override the inherited and call the super method for
clarification.</p>

<p><strong>Active by default</strong>: Yes - Since v1.0.0</p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-4">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Foo</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">super</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-4">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Foo</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">super</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">hashCode</span><span class="p">():</span> <span class="nc">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">super</span><span class="p">.</span><span class="nf">hashCode</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="exitoutsidemain">ExitOutsideMain</h3>

<p>Flags use of System.exit() and Kotlin’s exitProcess() when used outside of the <code class="language-plaintext highlighter-rouge">main</code> function. This makes code more
difficult to test, causes unexpected behaviour on Android, and is a poor way to signal a failure in the program. In
almost all cases it is more appropriate to throw an exception.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-5">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">randomFunction</span><span class="p">()</span> <span class="p">{</span>
<span class="kd">val</span> <span class="py">result</span> <span class="p">=</span> <span class="nf">doWork</span><span class="p">()</span>
<span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="p">==</span> <span class="nc">FAILURE</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">exitProcess</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">exitProcess</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-5">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
<span class="kd">val</span> <span class="py">result</span> <span class="p">=</span> <span class="nf">doWork</span><span class="p">()</span>
<span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="p">==</span> <span class="nc">FAILURE</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">exitProcess</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">exitProcess</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="explicitgarbagecollectioncall">ExplicitGarbageCollectionCall</h3>

<p>Reports all calls to explicitly trigger the Garbage Collector.
Code should work independently of the garbage collector and should not require the GC to be triggered in certain
points in time.</p>

<p><strong>Active by default</strong>: Yes - Since v1.0.0</p>

<p><strong>Debt</strong>: 20min</p>

<h4 id="noncompliant-code-6">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">System</span><span class="p">.</span><span class="nf">gc</span><span class="p">()</span>
<span class="nc">Runtime</span><span class="p">.</span><span class="nf">getRuntime</span><span class="p">().</span><span class="nf">gc</span><span class="p">()</span>
<span class="nc">System</span><span class="p">.</span><span class="nf">runFinalization</span><span class="p">()</span>
</code></pre></div></div>

<h3 id="hasplatformtype">HasPlatformType</h3>

<p>Platform types must be declared explicitly in public APIs to prevent unexpected errors.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-7">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Person</span> <span class="p">{</span>
<span class="k">fun</span> <span class="nf">apiCall</span><span class="p">()</span> <span class="p">=</span> <span class="nc">System</span><span class="p">.</span><span class="nf">getProperty</span><span class="p">(</span><span class="s">"propertyName"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-6">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Person</span> <span class="p">{</span>
<span class="k">fun</span> <span class="nf">apiCall</span><span class="p">():</span> <span class="nc">String</span> <span class="p">=</span> <span class="nc">System</span><span class="p">.</span><span class="nf">getProperty</span><span class="p">(</span><span class="s">"propertyName"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="ignoredreturnvalue">IgnoredReturnValue</h3>

<p>This rule warns on instances where a function, annotated with either <code class="language-plaintext highlighter-rouge">@CheckReturnValue</code> or <code class="language-plaintext highlighter-rouge">@CheckResult</code>,
returns a value but that value is not used in any way. The Kotlin compiler gives no warning for this scenario
normally so that’s the rationale behind this rule.</p>

<p>fun returnsValue() = 42
fun returnsNoValue() {}</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 20min</p>

<h4 id="configuration-options">Configuration options:</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">restrictToAnnotatedMethods</code> (default: <code class="language-plaintext highlighter-rouge">true</code>)</p>

    <p>if the rule should check only annotated methods.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">returnValueAnnotations</code> (default: <code class="language-plaintext highlighter-rouge">['*.CheckReturnValue', '*.CheckResult']</code>)</p>

    <p>List of glob patterns to be used as inspection annotation</p>
  </li>
</ul>

<h4 id="noncompliant-code-8">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nf">returnsValue</span><span class="p">()</span>
</code></pre></div></div>

<h4 id="compliant-code-7">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">if</span> <span class="p">(</span><span class="mi">42</span> <span class="p">==</span> <span class="nf">returnsValue</span><span class="p">())</span> <span class="p">{}</span>
    <span class="kd">val</span> <span class="py">x</span> <span class="p">=</span> <span class="nf">returnsValue</span><span class="p">()</span>
</code></pre></div></div>

<h3 id="implicitdefaultlocale">ImplicitDefaultLocale</h3>

<p>Prefer passing [java.util.Locale] explicitly than using implicit default value when formatting
strings or performing a case conversion.</p>

<p>The default locale is almost always not appropriate for machine-readable text like HTTP headers.
For example, if locale with tag <code class="language-plaintext highlighter-rouge">ar-SA-u-nu-arab</code> is a current default then <code class="language-plaintext highlighter-rouge">%d</code> placeholders
will be evaluated to numbers consisting of Eastern-Arabic (non-ASCII) digits.
[java.util.Locale.US] is recommended for machine-readable output.</p>

<p><strong>Active by default</strong>: Yes - Since v1.16.0</p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-9">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="s">"Timestamp: %d"</span><span class="p">,</span> <span class="nc">System</span><span class="p">.</span><span class="nf">currentTimeMillis</span><span class="p">())</span>

<span class="kd">val</span> <span class="py">str</span><span class="p">:</span> <span class="nc">String</span> <span class="p">=</span> <span class="nf">getString</span><span class="p">()</span>
<span class="n">str</span><span class="p">.</span><span class="nf">toUpperCase</span><span class="p">()</span>
<span class="n">str</span><span class="p">.</span><span class="nf">toLowerCase</span><span class="p">()</span>
</code></pre></div></div>

<h4 id="compliant-code-8">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nc">Locale</span><span class="p">.</span><span class="nc">US</span><span class="p">,</span> <span class="s">"Timestamp: %d"</span><span class="p">,</span> <span class="nc">System</span><span class="p">.</span><span class="nf">currentTimeMillis</span><span class="p">())</span>

<span class="kd">val</span> <span class="py">str</span><span class="p">:</span> <span class="nc">String</span> <span class="p">=</span> <span class="nf">getString</span><span class="p">()</span>
<span class="n">str</span><span class="p">.</span><span class="nf">toUpperCase</span><span class="p">(</span><span class="nc">Locale</span><span class="p">.</span><span class="nc">US</span><span class="p">)</span>
<span class="n">str</span><span class="p">.</span><span class="nf">toLowerCase</span><span class="p">(</span><span class="nc">Locale</span><span class="p">.</span><span class="nc">US</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="implicitunitreturntype">ImplicitUnitReturnType</h3>

<p>Functions using expression statements have an implicit return type.
Changing the type of the expression accidentally, changes the functions return type.
This may lead to backward incompatibility.
Use a block statement to make clear this function will never return a value.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="configuration-options-1">Configuration options:</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">allowExplicitReturnType</code> (default: <code class="language-plaintext highlighter-rouge">true</code>)</p>

    <p>if functions with explicit ‘Unit’ return type should be allowed</p>
  </li>
</ul>

<noncompliant>
fun errorProneUnit() = println("Hello Unit")
fun errorProneUnitWithParam(param: String) = param.run { println(this) }
fun String.errorProneUnitWithReceiver() = run { println(this) }
</noncompliant>

<compliant>
fun blockStatementUnit() {
    // code
}

// explicit Unit is compliant by default; can be configured to enforce block statement
fun safeUnitReturn(): Unit = println("Hello Unit")
</compliant>

<h3 id="invalidrange">InvalidRange</h3>

<p>Reports ranges which are empty.
This might be a bug if it is used for instance as a loop condition. This loop will never be triggered then.
This might be due to invalid ranges like (10..9) which will cause the loop to never be entered.</p>

<p><strong>Active by default</strong>: Yes - Since v1.2.0</p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-10">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="mi">2</span><span class="o">..</span><span class="mi">1</span><span class="p">)</span> <span class="p">{}</span>
<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="mi">1</span> <span class="n">downTo</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{}</span>

<span class="kd">val</span> <span class="py">range1</span> <span class="p">=</span> <span class="mi">2</span> <span class="n">until</span> <span class="mi">1</span>
<span class="kd">val</span> <span class="py">range2</span> <span class="p">=</span> <span class="mi">2</span> <span class="n">until</span> <span class="mi">2</span>
</code></pre></div></div>

<h4 id="compliant-code-9">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="mi">2</span><span class="o">..</span><span class="mi">2</span><span class="p">)</span> <span class="p">{}</span>
<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="mi">2</span> <span class="n">downTo</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{}</span>

<span class="kd">val</span> <span class="py">range</span> <span class="p">=</span> <span class="mi">2</span> <span class="n">until</span> <span class="mi">3</span>
</code></pre></div></div>

<h3 id="iteratorhasnextcallsnextmethod">IteratorHasNextCallsNextMethod</h3>

<p>Verifies implementations of the Iterator interface.
The hasNext() method of an Iterator implementation should not have any side effects.
This rule reports implementations that call the next() method of the Iterator inside the hasNext() method.</p>

<p><strong>Active by default</strong>: Yes - Since v1.2.0</p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-11">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyIterator</span> <span class="p">:</span> <span class="nc">Iterator</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">hasNext</span><span class="p">():</span> <span class="nc">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">next</span><span class="p">()</span> <span class="p">!=</span> <span class="k">null</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="iteratornotthrowingnosuchelementexception">IteratorNotThrowingNoSuchElementException</h3>

<p>Reports implementations of the <code class="language-plaintext highlighter-rouge">Iterator</code> interface which do not throw a NoSuchElementException in the
implementation of the next() method. When there are no more elements to return an Iterator should throw a
NoSuchElementException.</p>

<p>See: https://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#next()</p>

<p><strong>Active by default</strong>: Yes - Since v1.2.0</p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-12">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyIterator</span> <span class="p">:</span> <span class="nc">Iterator</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">next</span><span class="p">():</span> <span class="nc">String</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">""</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-10">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MyIterator</span> <span class="p">:</span> <span class="nc">Iterator</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">next</span><span class="p">():</span> <span class="nc">String</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(!</span><span class="k">this</span><span class="p">.</span><span class="nf">hasNext</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">throw</span> <span class="nc">NoSuchElementException</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="lateinitusage">LateinitUsage</h3>

<p>Turn on this rule to flag usages of the lateinit modifier.</p>

<p>Using lateinit for property initialization can be error prone and the actual initialization is not
guaranteed. Try using constructor injection or delegation to initialize properties.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Debt</strong>: 20min</p>

<h4 id="configuration-options-2">Configuration options:</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">excludeAnnotatedProperties</code> (default: <code class="language-plaintext highlighter-rouge">[]</code>)</p>

    <p>Allows you to provide a list of annotations that disable
this check.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ignoreOnClassesPattern</code> (default: <code class="language-plaintext highlighter-rouge">''</code>)</p>

    <p>Allows you to disable the rule for a list of classes</p>
  </li>
</ul>

<h4 id="noncompliant-code-13">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Foo</span> <span class="p">{</span>
    <span class="nd">@JvmField</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">i1</span><span class="p">:</span> <span class="nc">Int</span>
    <span class="nd">@JvmField</span> <span class="nd">@SinceKotlin</span><span class="p">(</span><span class="s">"1.0.0"</span><span class="p">)</span> <span class="k">lateinit</span> <span class="kd">var</span> <span class="py">i2</span><span class="p">:</span> <span class="nc">Int</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="mapgetwithnotnullassertionoperator">MapGetWithNotNullAssertionOperator</h3>

<p>Reports calls of the map access methods <code class="language-plaintext highlighter-rouge">map[]</code> or <code class="language-plaintext highlighter-rouge">map.get()</code> with a not-null assertion operator <code class="language-plaintext highlighter-rouge">!!</code>.
This may result in a NullPointerException.
Preferred access methods are <code class="language-plaintext highlighter-rouge">map[]</code> without <code class="language-plaintext highlighter-rouge">!!</code>, <code class="language-plaintext highlighter-rouge">map.getValue()</code>, <code class="language-plaintext highlighter-rouge">map.getOrDefault()</code> or <code class="language-plaintext highlighter-rouge">map.getOrElse()</code>.</p>

<p>Based on an IntelliJ IDEA inspection MapGetWithNotNullAssertionOperatorInspection.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-14">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">map</span> <span class="p">=</span> <span class="n">emptyMap</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">,</span> <span class="nc">String</span><span class="p">&gt;()</span>
<span class="n">map</span><span class="p">[</span><span class="s">"key"</span><span class="p">]</span><span class="o">!!</span>

<span class="kd">val</span> <span class="py">map</span> <span class="p">=</span> <span class="n">emptyMap</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">,</span> <span class="nc">String</span><span class="p">&gt;()</span>
<span class="n">map</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"key"</span><span class="p">)</span><span class="o">!!</span>
</code></pre></div></div>

<h4 id="compliant-code-11">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">map</span> <span class="p">=</span> <span class="n">emptyMap</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">,</span> <span class="nc">String</span><span class="p">&gt;()</span>
<span class="n">map</span><span class="p">[</span><span class="s">"key"</span><span class="p">]</span>

<span class="kd">val</span> <span class="py">map</span> <span class="p">=</span> <span class="n">emptyMap</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">,</span> <span class="nc">String</span><span class="p">&gt;()</span>
<span class="n">map</span><span class="p">.</span><span class="nf">getValue</span><span class="p">(</span><span class="s">"key"</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">map</span> <span class="p">=</span> <span class="n">emptyMap</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">,</span> <span class="nc">String</span><span class="p">&gt;()</span>
<span class="n">map</span><span class="p">.</span><span class="nf">getOrDefault</span><span class="p">(</span><span class="s">"key"</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">map</span> <span class="p">=</span> <span class="n">emptyMap</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">,</span> <span class="nc">String</span><span class="p">&gt;()</span>
<span class="n">map</span><span class="p">.</span><span class="nf">getOrElse</span><span class="p">(</span><span class="s">"key"</span><span class="p">,</span> <span class="p">{</span> <span class="s">""</span> <span class="p">})</span>
</code></pre></div></div>

<h3 id="missingwhencase">MissingWhenCase</h3>

<p>Turn on this rule to flag <code class="language-plaintext highlighter-rouge">when</code> expressions that do not check that all cases are covered when the subject is an enum
or sealed class and the <code class="language-plaintext highlighter-rouge">when</code> expression is used as a statement.</p>

<p>When this happens it’s unclear what was intended when an unhandled case is reached. It is better to be explicit and
either handle all cases or use a default <code class="language-plaintext highlighter-rouge">else</code> statement to cover the unhandled cases.</p>

<p><strong>Active by default</strong>: Yes - Since v1.2.0</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 20min</p>

<h4 id="configuration-options-3">Configuration options:</h4>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">allowElseExpression</code> (default: <code class="language-plaintext highlighter-rouge">true</code>)</p>

    <p>whether <code class="language-plaintext highlighter-rouge">else</code> can be treated as a valid case for enums and sealed classes</p>
  </li>
</ul>

<h4 id="noncompliant-code-15">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">enum</span> <span class="kd">class</span> <span class="nc">Color</span> <span class="p">{</span>
    <span class="nc">RED</span><span class="p">,</span>
    <span class="nc">GREEN</span><span class="p">,</span>
    <span class="nc">BLUE</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">whenOnEnumFail</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="nc">Color</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">when</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">BLUE</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">GREEN</span> <span class="p">-&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-12">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">enum</span> <span class="kd">class</span> <span class="nc">Color</span> <span class="p">{</span>
    <span class="nc">RED</span><span class="p">,</span>
    <span class="nc">GREEN</span><span class="p">,</span>
    <span class="nc">BLUE</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">whenOnEnumCompliant</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="nc">Color</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">when</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">BLUE</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">GREEN</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">RED</span> <span class="p">-&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">whenOnEnumCompliant2</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="nc">Color</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">when</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">BLUE</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="nullabletostringcall">NullableToStringCall</h3>

<p>Turn on this rule to flag ‘toString’ calls with a nullable receiver that may return the string “null”.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-16">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="nf">toString</span><span class="p">()</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">bar</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">"$a"</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-13">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">?.</span><span class="nf">toString</span><span class="p">()</span> <span class="o">?:</span> <span class="s">"-"</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">bar</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">"${a ?: "</span><span class="p">-</span><span class="s">"}"</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="redundantelseinwhen">RedundantElseInWhen</h3>

<p>Turn on this rule to flag <code class="language-plaintext highlighter-rouge">when</code> expressions that contain a redundant <code class="language-plaintext highlighter-rouge">else</code> case. This occurs when it can be
verified that all cases are already covered when checking cases on an enum or sealed class.</p>

<p><strong>Active by default</strong>: Yes - Since v1.2.0</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-17">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">enum</span> <span class="kd">class</span> <span class="nc">Color</span> <span class="p">{</span>
    <span class="nc">RED</span><span class="p">,</span>
    <span class="nc">GREEN</span><span class="p">,</span>
    <span class="nc">BLUE</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">whenOnEnumFail</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="nc">Color</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">when</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">BLUE</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">GREEN</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">RED</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-14">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">enum</span> <span class="kd">class</span> <span class="nc">Color</span> <span class="p">{</span>
    <span class="nc">RED</span><span class="p">,</span>
    <span class="nc">GREEN</span><span class="p">,</span>
    <span class="nc">BLUE</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">whenOnEnumCompliant</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="nc">Color</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">when</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">BLUE</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">GREEN</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">whenOnEnumCompliant2</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="nc">Color</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">when</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">BLUE</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">GREEN</span> <span class="p">-&gt;</span> <span class="p">{}</span>
        <span class="nc">Color</span><span class="p">.</span><span class="nc">RED</span> <span class="p">-&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="unconditionaljumpstatementinloop">UnconditionalJumpStatementInLoop</h3>

<p>Reports loops which contain jump statements that jump regardless of any conditions.
This implies that the loop is only executed once and thus could be rewritten without a
loop altogether.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-18">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="p">)</span> <span class="k">break</span>
</code></pre></div></div>

<h4 id="compliant-code-15">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">==</span> <span class="mi">1</span><span class="p">)</span> <span class="k">break</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="unnecessarynotnulloperator">UnnecessaryNotNullOperator</h3>

<p>Reports unnecessary not-null operator usage (!!) that can be removed by the user.</p>

<p><strong>Active by default</strong>: Yes - Since v1.16.0</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-19">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="mi">1</span>
<span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">a</span><span class="o">!!</span>
</code></pre></div></div>

<h4 id="compliant-code-16">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">a</span> <span class="p">=</span> <span class="mi">1</span>
<span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">a</span>
</code></pre></div></div>

<h3 id="unnecessarysafecall">UnnecessarySafeCall</h3>

<p>Reports unnecessary safe call operators (<code class="language-plaintext highlighter-rouge">?.</code>) that can be removed by the user.</p>

<p><strong>Active by default</strong>: Yes - Since v1.16.0</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-20">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">a</span><span class="p">:</span> <span class="nc">String</span> <span class="p">=</span> <span class="s">""</span>
<span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">a</span><span class="o">?.</span><span class="n">length</span>
</code></pre></div></div>

<h4 id="compliant-code-17">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">a</span><span class="p">:</span> <span class="nc">String</span><span class="p">?</span> <span class="p">=</span> <span class="k">null</span>
<span class="kd">val</span> <span class="py">b</span> <span class="p">=</span> <span class="n">a</span><span class="o">?.</span><span class="n">length</span>
</code></pre></div></div>

<h3 id="unreachablecatchblock">UnreachableCatchBlock</h3>

<p>Reports unreachable catch blocks.
Catch blocks can be unreachable if the exception has already been caught in the block above.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-21">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nc">Throwable</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">bar</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Unreachable</span>
        <span class="nf">baz</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-18">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">e</span><span class="p">:</span> <span class="nc">Exception</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">baz</span><span class="p">()</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nc">Throwable</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">bar</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="unreachablecode">UnreachableCode</h3>

<p>Reports unreachable code.
Code can be unreachable because it is behind return, throw, continue or break expressions.
This unreachable code should be removed as it serves no purpose.</p>

<p><strong>Active by default</strong>: Yes - Since v1.0.0</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-22">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">..</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">break</span>
    <span class="nf">println</span><span class="p">()</span> <span class="c1">// unreachable</span>
<span class="p">}</span>

<span class="k">throw</span> <span class="nc">IllegalArgumentException</span><span class="p">()</span>
<span class="nf">println</span><span class="p">()</span> <span class="c1">// unreachable</span>

<span class="k">fun</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span>
    <span class="nf">println</span><span class="p">()</span> <span class="c1">// unreachable</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="unsafecallonnullabletype">UnsafeCallOnNullableType</h3>

<p>Reports unsafe calls on nullable types. These calls will throw a NullPointerException in case
the nullable value is null. Kotlin provides many ways to work with nullable types to increase
null safety. Guard the code appropriately to prevent NullPointerExceptions.</p>

<p><strong>Active by default</strong>: Yes - Since v1.2.0</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 20min</p>

<h4 id="noncompliant-code-23">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">str</span><span class="p">:</span> <span class="nc">String</span><span class="p">?)</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="n">str</span><span class="o">!!</span><span class="p">.</span><span class="n">length</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-19">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">str</span><span class="p">:</span> <span class="nc">String</span><span class="p">?)</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="n">str</span><span class="o">?.</span><span class="n">length</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="unsafecast">UnsafeCast</h3>

<p>Reports casts that will never succeed.</p>

<p><strong>Active by default</strong>: Yes - Since v1.16.0</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 20min</p>

<p><strong>Aliases</strong>: UNCHECKED_CAST</p>

<h4 id="noncompliant-code-24">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="n">s</span> <span class="k">as</span> <span class="nc">Int</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">bar</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="n">s</span> <span class="k">as</span><span class="p">?</span> <span class="nc">Int</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-20">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">s</span><span class="p">:</span> <span class="nc">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">println</span><span class="p">(</span><span class="n">s</span> <span class="k">as</span> <span class="nc">Int</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="unusedunaryoperator">UnusedUnaryOperator</h3>

<p>This rule detects unused unary operators.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Requires Type Resolution</strong></p>

<p><strong>Debt</strong>: 5min</p>

<h4 id="noncompliant-code-25">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">x</span> <span class="p">=</span> <span class="mi">1</span> <span class="p">+</span> <span class="mi">2</span>
    <span class="p">+</span> <span class="mi">3</span> <span class="p">+</span> <span class="mi">4</span>
<span class="nf">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1">// 3</span>
</code></pre></div></div>

<h4 id="compliant-code-21">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">x</span> <span class="p">=</span> <span class="mi">1</span> <span class="p">+</span> <span class="mi">2</span> <span class="p">+</span> <span class="mi">3</span> <span class="p">+</span> <span class="mi">4</span>
<span class="nf">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1">// 10</span>
</code></pre></div></div>

<h3 id="uselesspostfixexpression">UselessPostfixExpression</h3>

<p>This rule reports postfix expressions (++, –) which are unused and thus unnecessary.
This leads to confusion as a reader of the code might think the value will be incremented/decremented.
However the value is replaced with the original value which might lead to bugs.</p>

<p><strong>Active by default</strong>: No</p>

<p><strong>Debt</strong>: 20min</p>

<h4 id="noncompliant-code-26">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">i</span> <span class="p">=</span> <span class="mi">0</span>
<span class="n">i</span> <span class="p">=</span> <span class="n">i--</span>
<span class="n">i</span> <span class="p">=</span> <span class="mi">1</span> <span class="p">+</span> <span class="n">i</span><span class="p">++</span>
<span class="n">i</span> <span class="p">=</span> <span class="n">i</span><span class="p">++</span> <span class="p">+</span> <span class="mi">1</span>

<span class="k">fun</span> <span class="nf">foo</span><span class="p">():</span> <span class="nc">Int</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="py">i</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="c1">// ...</span>
    <span class="k">return</span> <span class="n">i</span><span class="p">++</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-22">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="py">i</span> <span class="p">=</span> <span class="mi">0</span>
<span class="n">i--</span>
<span class="n">i</span> <span class="p">=</span> <span class="n">i</span> <span class="p">+</span> <span class="mi">2</span>
<span class="n">i</span> <span class="p">=</span> <span class="n">i</span> <span class="p">+</span> <span class="mi">2</span>

<span class="k">fun</span> <span class="nf">foo</span><span class="p">():</span> <span class="nc">Int</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="py">i</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="c1">// ...</span>
    <span class="n">i</span><span class="p">++</span>
    <span class="k">return</span> <span class="n">i</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="wrongequalstypeparameter">WrongEqualsTypeParameter</h3>

<p>Reports equals() methods which take in a wrongly typed parameter.
Correct implementations of the equals() method should only take in a parameter of type Any?
See: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/equals.html</p>

<p><strong>Active by default</strong>: Yes - Since v1.2.0</p>

<p><strong>Debt</strong>: 10min</p>

<h4 id="noncompliant-code-27">Noncompliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Foo</span> <span class="p">{</span>

    <span class="k">fun</span> <span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">super</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="compliant-code-23">Compliant Code:</h4>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Foo</span> <span class="p">{</span>

    <span class="k">fun</span> <span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="nc">Any</span><span class="p">?):</span> <span class="nc">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">super</span><span class="p">.</span><span class="nf">equals</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>


    <div class="tags">
        
    </div>




</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2021 The detekt Team. All rights reserved. <br />
 Site last generated: Apr 10, 2021 <br />
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

</html>
